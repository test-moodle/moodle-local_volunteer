define("local_volunteer/volunteer",["exports","core/notification","core/ajax","core/str","core_reportbuilder/local/selectors","core/toast"],(function(_exports,_notification,_ajax,_str,reportSelectors,_toast){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module used to select a volunteer.
   *
   * @module     local_volunteer/volunteer
   * @copyright  2025 Odei Alba <odeialba@odeialba.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(courseid,userid){(async userid=>{(await document.querySelector(reportSelectors.regions.report).querySelectorAll('[data-togglegroup="report-select-all"]')).forEach((function(checkbox){checkbox.checked=!0})),uncheckUser(userid)})(userid),document.addEventListener("click",(event=>{const findVolunteerElement=event.target.closest(SELECTORS_FINDVOLUNTEER);findVolunteerElement&&(event.preventDefault(),(async(findVolunteerElement,courseid)=>{findVolunteerElement.setAttribute("disabled",!0);const checkedUsers=getCheckedUsers();var userids=[];if(checkedUsers.forEach((function(user){userids.push(user.value)})),!checkedUsers.length)return(0,_toast.add)((0,_str.getString)("notenoughusers","local_volunteer"),{type:"danger"}),void findVolunteerElement.removeAttribute("disabled");_ajax.default.call([{methodname:"local_volunteer_find_volunteer",args:{courseid:courseid,userids:userids}}])[0].done((function(result){result.success?_notification.default.alert((0,_str.getString)("volunteerfound","local_volunteer"),result.volunteerfullname):(0,_toast.add)(result.errormessage,{type:"danger"})})).then((function(){findVolunteerElement.removeAttribute("disabled")})).fail(_notification.default.exception)})(findVolunteerElement,courseid))}))},_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax),reportSelectors=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(reportSelectors);const SELECTORS_FINDVOLUNTEER="[data-action='findvolunteer']",getCheckedUsers=()=>document.querySelector(reportSelectors.regions.report).querySelectorAll('[data-togglegroup="report-select-all"][data-toggle="slave"]:checked'),uncheckUser=async userid=>{(await getCheckedUsers()).forEach((function(user){user.value==userid&&(user.checked=!1)}))}}));

//# sourceMappingURL=volunteer.min.js.map